{% extends 'base.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('../css/ratingBar.css') }}"/>
    <link rel="stylesheet" href="{{ asset('../css/caroussel.css') }}"/>
{% endblock %}
{% block title %}Explorer - Films - MovieProgress
{% endblock %}
{% block content %}
            
    
    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner " >
            <div class="carousel-item active">
                <img class="d-block w-100" src="https://image.tmdb.org/t/p/w780/{{ ActualsMovies.results[0].backdrop_path }}" alt="First slide">
                <div class="carousel-caption d-none d-md-block">

                
                    <h1>Disponible en salle</h1>
                    <p>{{ ActualsMovies.results[0].title}}</p>
                </div>

            </div>
            {% for ActualMovie in ActualsMovies.results | slice(1, 5) %}
            <div class="carousel-item">
                <img class="d-block w-100" src="https://image.tmdb.org/t/p/w780/{{ ActualMovie.backdrop_path }}" alt="img {{ ActualMovie.title }}">
                <div class="carousel-caption d-none d-md-block">
                    <h1>Disponible en salle</h1>
                    <p>{{ ActualMovie.title }}</p>
                </div>

            </div>
            {% endfor %}

        </div>
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    {# <nav class="navbar navbar-dark bg-dark">
        <a href="{{ path('explorer') }}" style="color:white; width: 50%; text-align: center;">Films</a>
        <a href="{{ path('homeList') }}" style="color:white; width: 50%; text-align: center;">Listes</a>
    </nav> #}
    {# <div class="album py-5 bg-black" style="padding-top: 0px!important; ">
        {% for moviesArrayHome in moviesArraysHome %}


            {% if moviesArrayHome[3] is defined %}
                <h1>
                    {{ moviesArrayHome[0] }}</h1>
                <a href="{{ path('genre', {'id': moviesArrayHome[1], 'name':moviesArrayHome[0] }) }}">Voir plus</a>
            {% else %}
                <h1>
                    {{ moviesArrayHome[0] }}</h1>
                <a href="{{ path('specialDisplay', {'data':moviesArrayHome[1]}) }}">Voir plus</a>
            {% endif %}
            <div class="row">
                {% for movie in moviesArrayHome[2].results | slice(0,6) %}
                    <div class="col-md-2">
                        <div class="card mb-3 shadow-sm">
                            <a href="{{ path('movie', {'id':movie.id }) }}" class="mousehover over_a">
                                <img alt="" class="bd-placeholder-img card-img-top" src="https://image.tmdb.org/t/p/w400/{{ movie.poster_path }}">
                                <i class="over_i fas fa-search fa-2x" ></i>
                                
                            </a>
                            <div class="card-body">
                                <h5 class="card-text">
                                    {{ movie.title }}</h5>
                                <h5 class="card-text">
                                    {% set currentRate = 15 %}
                                    {% for rating in app.user.movieViews %}
                                        {% if rating.movie.idTMDB == movie.id %}
                                            {% set currentRate = rating.rate %}
                                        {% endif %}
                                    {% endfor %}
                                </h5>
                                <select class="rating" id="{{ movie.id }}" >
                                <option value=""></option>
                                    
                                    {% for i in 0..10 %}
                                        <option value={{ i }} {{ i == currentRate ? "selected" }}>
                                            {{ i }}</option>
                                    {% endfor %}
                                </select>
                               
                                    <div class="btn-group">
                                        <a href=""  data-api-id="{{ movie.id }}" class="watch-btn btn btn-link">
                                            {% set viewed = 0 %}
                                            {% for view in app.user.movieViews %}
                                                {% if view.movie.idTMDB == movie.id %}
                                                    {% set viewed = 1 %}
                                                {% endif %}
                                            {% endfor %}
                                            {% if viewed == 1 %}
                                                <i id="{{ movie.id }}" class="btn btn-secondary ">J'ai vu ce film</i>
                                            {% else %}
                                                <i id="{{ movie.id }}" class="btn btn-light">J'ai vu ce film</i>
                                            {% endif %}
                                        </a>
                                         <a href=""  data-api-id="{{ movie.id }}" class="toWatch-btn btn btn-link">
                                            {% set viewed = 0 %}
                                            {% for view in app.user.movieToWatches %}
                                                {% if view.movie.idTMDB == movie.id %}
                                                    {% set viewed = 1 %}
                                                {% endif %}
                                            {% endfor %}
                                            {% if viewed == 1 %}
                                                <i id="{{ movie.id }}" class="btn btn-secondary ">Je veux voir ce film</i>
                                            {% else %}
                                                <i id="{{ movie.id }}" class="btn btn-light">Je veux voir ce film</i>
                                            {% endif %}
                                        </a>
                                    </div>
                                
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div> #}
{# </div> #}
{% endblock %}{% block javascripts %}
{{ parent() }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-bar-rating/1.2.2/jquery.barrating.min.js"></script>
<script src="{{ asset('../js/ratingBar.js') }}"></script>
<script src="{{ asset('../js/watchBtn.js') }}"></script>
<script src="{{ asset('../js/toWatchBtn.js') }}"></script>
{% endblock %}{# {{ movie.backdropImage|tmdb_image_html('original', 2000, 2000)|raw }} #}
